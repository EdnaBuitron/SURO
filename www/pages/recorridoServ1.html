<template>
  <div class="page">
      <div class="navbar" style="background-color: #063E7F;height: 52px;">
          <div style="text-align: center;"><img src="img/logo-FWM.png" style="margin-top: 5px;" height="41.38px" alt="Logo Field"></div>
          <div class="navbar-inner" style="height: 52px;">
              <div class="left">
                  <a href="javascript:location.reload()" class="link back" style="margin-left: 5px;">
                      <span class="nav-text-regresar-recorrido">Regresar</span>
                  </a>
              </div>
          </div>
      </div>
      <div class="page-content" style="background-color: #f6f7f9; ">
            <a href="#" class="float" onclick="showTPM()">
                <i class="material-icons md-light" style="color: #ffffff;font-size: 35px;">book</i>
            </a>
          <div style="text-align: center; justify-content:center; margin-right:auto; margin-left:auto; width: 99%;">
              <input type="hidden" id="resp1" name="resp1" />
              <div style="text-align: left;">        
                  <div class="item-inner">
                      <div class="block-title" style="text-align: center; font-size: 20px;"><h2 style="color:#505759;font-size: 22px;font-family: 'ITC Avant Garde Gothic', sans-serif;">Recorrido de Checklist</h2></div>
                  </div>
              </div>
                  <div class="buttons-container" style="display: flex;">
                      <a href="/datosgeneralesServ1/" class="fwm-button-recorrido">
                          <img src="img/iconsMenu/persona2.svg" width="90px" height="90px" id="img1"/>
                          <span class="fwm-text-recorrido">Datos Generales</span>
                      </a>
                      <a href="/formServ1/" class="fwm-button-recorrido">
                          <img src="img/iconsMenu/coccion.svg" width="90px" height="90px" id="img2"/>
                          <span class="fwm-text-recorrido">1.- Equipo de Cocción</span>
                      </a>
                  </div>
                  <div class="buttons-container" style="display: flex;margin-top: 5%;">
                      <a href="/formServ2/" class="fwm-button-recorrido">
                          <img src="img/iconsMenu/herramienta.svg" width="90px" height="90px" id="img3"/>
                          <span class="fwm-text-recorrido">2.- Suministros Mecánicos</span>
                      </a>
                      <a href="/formServ3/" class="fwm-button-recorrido">
                          <img src="img/iconsMenu/calentador.svg" width="90px" height="90px" id="img4"/>
                          <span class="fwm-text-recorrido">3.- Sistema de Calentamiento</span>
                      </a>
                  </div>
                  <div class="buttons-container" style="display: flex;margin-top: 5%;">
                      <a href="/formServ4/" class="fwm-button-recorrido">
                          <img src="img/iconsMenu/electrico.svg" width="90px" height="90px" id="img5"/>
                          <span class="fwm-text-recorrido">4.- Control Electrico</span>
                      </a>
                      <a href="/formServ5/" class="fwm-button-recorrido">
                          <img src="img/iconsMenu/sensor.svg" width="90px" height="90px" id="img6"/>
                          <span class="fwm-text-recorrido">5.- Revisión de Sensores</span>
                      </a>
                  </div>
                  <div class="buttons-container" style="display: flex;margin-top: 5%;margin-bottom: 30px;">
                      <a href="/formServ6/" class="fwm-button-recorrido">
                          <img src="img/iconsMenu/gabinete.svg" width="90px" height="90px" id="img7"/>
                          <span class="fwm-text-recorrido">6.- Gabinete en General</span>
                      </a>
                      <a href="/cierreServInd1/" class="fwm-button-recorrido">
                          <img src="img/iconsMenu/estrellas.svg" width="90px" height="90px" id="img8"/>
                          <span class="fwm-text-recorrido">Cierre</span>
                      </a>
                  </div>
              <!-- Inicio FWM Recorrido -->
                  <div id="FWM-Menu" class="container-items" style="width: 100%;"></div>
              <!-- Fin FWM Recorrido -->
              <fwm></fwm>
          </div> 
      </div>
  </div>
</template>
         
<script>
  return {
      on: {      
          pageInit: function () {
            var id_cedula = localStorage.getItem("IdCedula");
            databaseHandler.db.transaction(
                function(tx){
                    tx.executeSql("SELECT * from checklist WHERE id_cedula = ? AND (nombre_cliente IS NOT NULL AND orden_servicio IS NOT NULL AND tienda IS NOT NULL)",
                        [id_cedula],
                        function(tx, results){
                            var item = results.rows.item(0);
                            if(item.id_cedula > 0){
                                document.getElementById("img1").src="img/iconsMenu/persona.svg";
                            }
                        },
                        function(tx, error){
                        }
                    );
                },
                function(error){},
                function(){}
            );
            databaseHandler.db.transaction(
                function(tx){
                    tx.executeSql("SELECT * from checklist WHERE id_cedula = ? AND (modelo IS NOT NULL AND serie IS NOT NULL)",
                        [id_cedula],
                        function(tx, results){
                            var item = results.rows.item(0);
                            if(item.id_cedula > 0){
                                document.getElementById("img2").src="img/iconsMenu/coccion2.svg";
                            }
                        },
                        function(tx, error){
                        }
                    );
                },
                function(error){},
                function(){}
            );
            databaseHandler.db.transaction(
                function(tx){
                    tx.executeSql("SELECT * from checklist WHERE id_cedula = ? AND (modelo IS NOT NULL AND serie IS NOT NULL)",
                        [id_cedula],
                        function(tx, results){
                            var item = results.rows.item(0);
                            if(item.id_cedula > 0){
                                document.getElementById("img2").src="img/iconsMenu/coccion2.svg";
                            }
                        },
                        function(tx, error){
                        }
                    );
                },
                function(error){},
                function(){}
            );
            databaseHandler.db.transaction(
                function(tx){
                    tx.executeSql("SELECT * from checklist WHERE id_cedula = ? AND (voltaje IS NOT NULL AND amperaje IS NOT NULL AND breaker IS NOT NULL)",
                        [id_cedula],
                        function(tx, results){
                            var item = results.rows.item(0);
                            if(item.id_cedula > 0){
                                document.getElementById("img3").src="img/iconsMenu/herramienta2.svg";
                            }
                        },
                        function(tx, error){
                        }
                    );
                },
                function(error){},
                function(){}
            );
            databaseHandler.db.transaction(
                function(tx){
                    tx.executeSql("SELECT * from checklist WHERE id_cedula = ? AND (dinamica IS NOT NULL AND estatica IS NOT NULL)",
                        [id_cedula],
                        function(tx, results){
                            var item = results.rows.item(0);
                            if(item.id_cedula > 0){
                                document.getElementById("img4").src="img/iconsMenu/calentador2.svg";
                            }
                        },
                        function(tx, error){
                        }
                    );
                },
                function(error){},
                function(){}
            );
            databaseHandler.db.transaction(
                function(tx){
                    tx.executeSql("SELECT * from checklist WHERE id_cedula = ? AND (amp1 IS NOT NULL AND amp8 IS NOT NULL)",
                        [id_cedula],
                        function(tx, results){
                            var item = results.rows.item(0);
                            if(item.id_cedula > 0){
                                document.getElementById("img5").src="img/iconsMenu/electrico2.svg";
                            }
                        },
                        function(tx, error){
                        }
                    );
                },
                function(error){},
                function(){}
            );
            databaseHandler.db.transaction(
                function(tx){
                    tx.executeSql("SELECT * from checklist WHERE id_cedula = ? AND (nivel IS NOT NULL AND magneto IS NOT NULL)",
                        [id_cedula],
                        function(tx, results){
                            var item = results.rows.item(0);
                            if(item.id_cedula > 0){
                                document.getElementById("img6").src="img/iconsMenu/sensor2.svg";
                            }
                        },
                        function(tx, error){
                        }
                    );
                },
                function(error){},
                function(){}
            );
            databaseHandler.db.transaction(
                function(tx){
                    tx.executeSql("SELECT * from selectcheck WHERE id_cedula = ? AND fase = '4'",
                        [id_cedula],
                        function(tx, results){
                            var item = results.rows.item(0);
                            console.log(results)
                            if(item.id_cedula > 0){
                                document.getElementById("img7").src="img/iconsMenu/gabinete2.svg";
                            }
                        },
                        function(tx, error){
                        }
                    );
                },
                function(error){},
                function(){}
            );
          }
      }
  }
</script>